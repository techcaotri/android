
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Flutter Framework Analysis 3 - Widget, Element and RenderObject Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="@gitbook-ng/gitbook 3.3.6">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fancybox/jquery.fancybox.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex-toc/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-ace/ace.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters-interactive/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-wide-page/wide.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Flutter Framework Analysis 4 - Flutter Framework Operation.html" />
    
    
    <link rel="prev" href="Flutter Framework Analysis 2 - Initialization.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Graphical Android
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="Graphical Android - Zygote, System Server startup analysis.html">
            
                <a href="Graphical Android - Zygote, System Server startup analysis.html">
            
                    
                    Graphical Android - Zygote, System Server startup analysis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Android Permissions
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Android Permissions - Android Runtime Permission.html">
            
                <a href="Android Permissions - Android Runtime Permission.html">
            
                    
                    Android Permissions - Android Runtime Permission
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Android Permissions - Android grantRuntimePermission Detailed.html">
            
                <a href="Android Permissions - Android grantRuntimePermission Detailed.html">
            
                    
                    Android Permissions - Android grantRuntimePermission Detailed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="Android Permissions - Android GrantPermissionsActivity Detailed.html">
            
                <a href="Android Permissions - Android GrantPermissionsActivity Detailed.html">
            
                    
                    Android Permissions - Android GrantPermissionsActivity Detailed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="Android Permissions - AppOps control for Normal permission.html">
            
                <a href="Android Permissions - AppOps control for Normal permission.html">
            
                    
                    Android Permissions - AppOps control for Normal permission
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="Android Permissions - Android native permission control process.html">
            
                <a href="Android Permissions - Android native permission control process.html">
            
                    
                    Android Permissions - Android native permission control process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="Android Permissions - The difference between setUidMode and setMode in AppOps.html">
            
                <a href="Android Permissions - The difference between setUidMode and setMode in AppOps.html">
            
                    
                    Android Permissions - The difference between setUidMode and setMode in AppOps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="Android Permissions - Application permissions before android M and application permissions after M.html">
            
                <a href="Android Permissions - Application permissions before android M and application permissions after M.html">
            
                    
                    Android Permissions - Application permissions before android M and application permissions after M
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="Android Permissions - Provider permissions detailed.html">
            
                <a href="Android Permissions - Provider permissions detailed.html">
            
                    
                    Android Permissions - Provider permissions detailed
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Android OTA
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="Android OTA - Android OTA upgrade principle and process analysis 1.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 1.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="Android OTA - Android OTA upgrade principle and process analysis 2.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 2.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="Android OTA - Android OTA upgrade principle and process analysis 3.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 3.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="Android OTA - Android OTA upgrade principle and process analysis 4.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 4.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="Android OTA - Android OTA upgrade principle and process analysis 5.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 5.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="Android OTA - Android OTA upgrade principle and process analysis 6.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 6.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="Android OTA - Android OTA upgrade principle and process analysis 7.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 7.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 7
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="Android OTA - Android OTA upgrade principle and process analysis 8.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 8.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 8
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="Android OTA - Android OTA upgrade principle and process analysis 9.html">
            
                <a href="Android OTA - Android OTA upgrade principle and process analysis 9.html">
            
                    
                    Android OTA - Android OTA upgrade principle and process analysis 9
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Android Package Manager Service (PMS)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Android PMS - Explore the Android PMS service.html">
            
                <a href="Android PMS - Explore the Android PMS service.html">
            
                    
                    Android PMS - Explore the Android PMS service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="Android PMS - Some rules of the PMS runtime.html">
            
                <a href="Android PMS - Some rules of the PMS runtime.html">
            
                    
                    Android PMS - Some rules of the PMS runtime
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="Android PMS - Android 6 PMS Analysis.html">
            
                <a href="Android PMS - Android 6 PMS Analysis.html">
            
                    
                    Android PMS - Android 6 PMS Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="Android PMS - Android 6 PMS analysis article 1.html">
            
                <a href="Android PMS - Android 6 PMS analysis article 1.html">
            
                    
                    Android PMS - Android 6 PMS analysis article 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="Android PMS - Android 6 PMS analysis article 2.html">
            
                <a href="Android PMS - Android 6 PMS analysis article 2.html">
            
                    
                    Android PMS - Android 6 PMS analysis article 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="Android PMS - Android 6 PMS analysis of the next article.html">
            
                <a href="Android PMS - Android 6 PMS analysis of the next article.html">
            
                    
                    Android PMS - Android 6 PMS analysis of the next article
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="Android PMS - Android 6 PMS install APK prelude.html">
            
                <a href="Android PMS - Android 6 PMS install APK prelude.html">
            
                    
                    Android PMS - Android 6 PMS install APK prelude
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="Android PMS - Android 6 PMS installation APK.html">
            
                <a href="Android PMS - Android 6 PMS installation APK.html">
            
                    
                    Android PMS - Android 6 PMS installation APK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="Android PMS - Android 6 PMS installation APK next article.html">
            
                <a href="Android PMS - Android 6 PMS installation APK next article.html">
            
                    
                    Android PMS - Android 6 PMS installation APK next article
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="Android PMS - Android 6 PMS Uninstall APK.html">
            
                <a href="Android PMS - Android 6 PMS Uninstall APK.html">
            
                    
                    Android PMS - Android 6 PMS Uninstall APK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="Android PMS - Android 6 PMS daemon installd.html">
            
                <a href="Android PMS - Android 6 PMS daemon installd.html">
            
                    
                    Android PMS - Android 6 PMS daemon installd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Android AOSP
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="Android AOSP - Debugging AOSP Platform code with Android Studio - Java Debugger.html">
            
                <a href="Android AOSP - Debugging AOSP Platform code with Android Studio - Java Debugger.html">
            
                    
                    Android AOSP - Debugging AOSP Platform code with Android Studio - Java Debugger
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="Android AOSP - Modify applications and rebuild emulator image effectively.html">
            
                <a href="Android AOSP - Modify applications and rebuild emulator image effectively.html">
            
                    
                    Android AOSP - Modify applications and rebuild emulator image effectively
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Android General
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Android General - Reliable connection to AIDL IPC Service in Android.html">
            
                <a href="Android General - Reliable connection to AIDL IPC Service in Android.html">
            
                    
                    Android General - Reliable connection to AIDL IPC Service in Android
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Android Binder
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    Android Activity Manager Service (AMS)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Live555
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="Live555 - Live555 source code analysis_introduction.html">
            
                <a href="Live555 - Live555 source code analysis_introduction.html">
            
                    
                    Live555 - Live555 source code analysis_introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="Live555 - Live555 source code analysis_infrastructure.html">
            
                <a href="Live555 - Live555 source code analysis_infrastructure.html">
            
                    
                    Live555 - Live555 source code analysis_infrastructure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="Live555 - Live555 source code analysis_mediaserver.html">
            
                <a href="Live555 - Live555 source code analysis_mediaserver.html">
            
                    
                    Live555 - Live555 source code analysis_mediaserver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="Live555 - Wireshark capture packet analysis RTSP_RTP_RTCP basic working process.html">
            
                <a href="Live555 - Wireshark capture packet analysis RTSP_RTP_RTCP basic working process.html">
            
                    
                    Live555 - Wireshark capture packet analysis RTSP_RTP_RTCP basic working process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="Live555 - Live555 source code analysis_rtspserver.html">
            
                <a href="Live555 - Live555 source code analysis_rtspserver.html">
            
                    
                    Live555 - Live555 source code analysis_rtspserver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="Live555 - Live555 source code analysis_describe processing.html">
            
                <a href="Live555 - Live555 source code analysis_describe processing.html">
            
                    
                    Live555 - Live555 source code analysis_describe processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="Live555 - Live555 source code analysis_setup processing.html">
            
                <a href="Live555 - Live555 source code analysis_setup processing.html">
            
                    
                    Live555 - Live555 source code analysis_setup processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="Live555 - Live555 source code analysis_play processing.html">
            
                <a href="Live555 - Live555 source code analysis_play processing.html">
            
                    
                    Live555 - Live555 source code analysis_play processing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="Live555 - Live555 source code analysis_RTSPServer component structure.html">
            
                <a href="Live555 - Live555 source code analysis_RTSPServer component structure.html">
            
                    
                    Live555 - Live555 source code analysis_RTSPServer component structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="Live555 - Live555 source code analysis_servermediasession.html">
            
                <a href="Live555 - Live555 source code analysis_servermediasession.html">
            
                    
                    Live555 - Live555 source code analysis_servermediasession
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="Live555 - Live555 source code analysis_subsession SDP line generation.html">
            
                <a href="Live555 - Live555 source code analysis_subsession SDP line generation.html">
            
                    
                    Live555 - Live555 source code analysis_subsession SDP line generation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="Live555 - Live555 source code analysis_Subsession SETUP.html">
            
                <a href="Live555 - Live555 source code analysis_Subsession SETUP.html">
            
                    
                    Live555 - Live555 source code analysis_Subsession SETUP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="Live555 - Live555 source code analysis_play start.html">
            
                <a href="Live555 - Live555 source code analysis_play start.html">
            
                    
                    Live555 - Live555 source code analysis_play start
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Flutter
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="Flutter Framework Analysis 1 - Overview and Window.html">
            
                <a href="Flutter Framework Analysis 1 - Overview and Window.html">
            
                    
                    Flutter Framework Analysis 1 - Overview and Window
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="Flutter Framework Analysis 2 - Initialization.html">
            
                <a href="Flutter Framework Analysis 2 - Initialization.html">
            
                    
                    Flutter Framework Analysis 2 - Initialization
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11.3" data-path="Flutter Framework Analysis 3 - Widget, Element and RenderObject.html">
            
                <a href="Flutter Framework Analysis 3 - Widget, Element and RenderObject.html">
            
                    
                    Flutter Framework Analysis 3 - Widget, Element and RenderObject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="Flutter Framework Analysis 4 - Flutter Framework Operation.html">
            
                <a href="Flutter Framework Analysis 4 - Flutter Framework Operation.html">
            
                    
                    Flutter Framework Analysis 4 - Flutter Framework Operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="Flutter Framework Analysis 5 - Animation.html">
            
                <a href="Flutter Framework Analysis 5 - Animation.html">
            
                    
                    Flutter Framework Analysis 5 - Animation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="Flutter Framework Analysis 6 - Layout.html">
            
                <a href="Flutter Framework Analysis 6 - Layout.html">
            
                    
                    Flutter Framework Analysis 6 - Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="Flutter Framework Analysis 7 - Drawing.html">
            
                <a href="Flutter Framework Analysis 7 - Drawing.html">
            
                    
                    Flutter Framework Analysis 7 - Drawing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Flutter Framework Analysis 3 - Widget, Element and RenderObject</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><span class="title-icon "></span><a href="#flutter-framework-analysis-3----widget-element-and-renderobject"><b>1. </b>Flutter Framework Analysis (3) -- Widget, Element and RenderObject</a></li><ul><li><span class="title-icon "></span><a href="#foreword"><b>1.1. </b>Foreword</a></li><li><span class="title-icon "></span><a href="#overview"><b>1.2. </b>Overview</a></li><li><span class="title-icon "></span><a href="#widget"><b>1.3. </b>Widget</a></li><ul><li><span class="title-icon "></span><a href="#statelesswidget"><b>1.3.1. </b>StatelessWidget</a></li><li><span class="title-icon "></span><a href="#statefulwidget"><b>1.3.2. </b>StatefulWidget</a></li><li><span class="title-icon "></span><a href="#inheritedwidget"><b>1.3.3. </b>InheritedWidget</a></li><li><span class="title-icon "></span><a href="#renderobjectwidget"><b>1.3.4. </b>RenderObjectWidget</a></li></ul><li><span class="title-icon "></span><a href="#element"><b>1.4. </b>Element</a></li><ul><li><span class="title-icon "></span><a href="#componentelement"><b>1.4.1. </b>ComponentElement</a></li><li><span class="title-icon "></span><a href="#statelesselement"><b>1.4.2. </b>StatelessElement</a></li><li><span class="title-icon "></span><a href="#statefulelement"><b>1.4.3. </b>StatefulElement</a></li><li><span class="title-icon "></span><a href="#inheritedelement"><b>1.4.4. </b>InheritedElement</a></li><li><span class="title-icon "></span><a href="#renderobjectelement"><b>1.4.5. </b>RenderObjectElement</a></li></ul><li><span class="title-icon "></span><a href="#renderobject"><b>1.5. </b>RenderObject</a></li><li><span class="title-icon "></span><a href="#to-sum-up"><b>1.6. </b>to sum up</a></li></ul></ul></div><a href="#flutter-framework-analysis-3----widget-element-and-renderobject" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="flutter-framework-analysis-3----widget-element-and-renderobject"><a name="flutter-framework-analysis-3----widget-element-and-renderobject" class="anchor-navigation-ex-anchor" href="#flutter-framework-analysis-3----widget-element-and-renderobject"><i class="fa fa-link" aria-hidden="true"></i></a>1. Flutter Framework Analysis (3) -- Widget, Element and RenderObject</h1>
<p>Flutter Framework Analysis and Analysis Series:</p>
<p><a href="Flutter%20Framework%20Analysis%201%20-%20Overview%20and%20Window.html">&quot;Flutter Framework Analysis (1) - Overview and Window&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%202%20-%20Initialization.html">&quot;Flutter Framework Analysis (2) - Initialization&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%203%20-%20Widget,%20Element%20and%20RenderObject.html">&quot;Flutter Framework Analysis (3) - Widget, Element and RenderObject&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%204%20-%20Flutter%20Framework%20Operation.html">&quot;Flutter Framework Analysis (4) - Flutter Framework Operation&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%205%20-%20Animation.html">&quot;Flutter Framework Analysis (5) - Animation&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%206%20-%20Layout.html">&quot;Flutter Framework Analysis (6) - Layout&quot;</a></p>
<p><a href="Flutter%20Framework%20Analysis%207%20-%20Drawing.html">&quot;Flutter Framework Analysis (7) - Drawing&quot;</a></p>
<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->
<ul>
<li><a href="#flutter-framework-analysis-3-widget-element-and-renderobject"><strong>Flutter Framework Analysis (3) -- Widget, Element and RenderObject</strong></a><ul>
<li><a href="#foreword"><strong>Foreword</strong></a></li>
<li><a href="#overview"><strong>Overview</strong></a></li>
<li><a href="#widget"><strong>Widget</strong></a><ul>
<li><a href="#statelesswidget"><strong>StatelessWidget</strong></a></li>
<li><a href="#statefulwidget"><strong>StatefulWidget</strong></a><ul>
<li><a href="#state"><strong>State</strong></a></li>
</ul>
</li>
<li><a href="#inheritedwidget"><strong>InheritedWidget</strong></a></li>
<li><a href="#renderobjectwidget"><strong>RenderObjectWidget</strong></a></li>
</ul>
</li>
<li><a href="#element"><strong>Element</strong></a><ul>
<li><a href="#componentelement"><strong>ComponentElement</strong></a></li>
<li><a href="#statelesselement"><strong>StatelessElement</strong></a></li>
<li><a href="#statefulelement"><strong>StatefulElement</strong></a></li>
<li><a href="#inheritedelement"><strong>InheritedElement</strong></a></li>
<li><a href="#renderobjectelement"><strong>RenderObjectElement</strong></a></li>
</ul>
</li>
<li><a href="#renderobject"><strong>RenderObject</strong></a></li>
<li><a href="#to-sum-up"><strong>to sum up</strong></a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="foreword"><a name="foreword" class="anchor-navigation-ex-anchor" href="#foreword"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Foreword</h2>
<p>The previous two articles on the analysis of the Flutter framework introduced
the rendering pipeline, the window and the initialization of the framework. The
article goes on to manage at the Flutter app developers more
important <code>Widget</code>, <code>Element</code> and <code>RenderObjectsystem</code>. Flutter&apos;s philosophy is
that <code>Widget</code>. Everything is Widget. Developers are mostly writing a lot when
developing the Flutter app <code>Widget</code>. So what is the relationship between the
three? How do they work? Let us find out.</p>
<h2 id="overview"><a name="overview" class="anchor-navigation-ex-anchor" href="#overview"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Overview</h2>
<p>The content of this piece is more and more complicated. In order to prevent
everyone from getting lost in the sea of &#x200B;&#x200B;source code, let us briefly give an
example to understand this system.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">void main() {
  runApp(MyWidget());
}

class MyWidget extends StatelessWidget {
  final String _message = &quot;Flutter&#x6846;&#x67B6;&#x5206;&#x6790;&quot;;
  @override
  Widget build(BuildContext context) =&gt; ErrorWidget(_message);
}<br></div></div>


<p>This example uses Flutter&apos;s own <code>ErrorWidget</code> display of our custom sentence:
&quot;Flutter Framework Analysis.&quot; That&apos;s right, this <code>ErrorWidget</code> is the terrible
red-yellow yellow message that appears on the screen when your code is out of
bug. Let&apos;s take a look at the screenshots.</p>
<p>     <a href="media/91129906e9aafea4696aecb992d6f8fa.png" rel="grouped" title="https://user-gold-cdn.xitu.io/2019/3/8/1695928c0a15cdf7?imageslim" target="_self" class="fancybox">
       <img src="media/91129906e9aafea4696aecb992d6f8fa.png" alt="https://user-gold-cdn.xitu.io/2019/3/8/1695928c0a15cdf7?imageslim">
     </a></p>
<p>It is used here because it is the simplest and least hierarchical one <code>Widget</code>. So
that we can understand the Flutter framework and avoid being dismissed
by <code>MaterialApp</code> the unfathomable element tree and render tree.</p>
<p>After running the above example, open the Flutter Inspector and look at it:</p>
<p>     <a href="media/dacbfb4c25d517e5c89b0c08142b91a2.png" rel="grouped" title="https://user-gold-cdn.xitu.io/2019/3/8/1695931b64281f5d?imageslim" target="_self" class="fancybox">
       <img src="media/dacbfb4c25d517e5c89b0c08142b91a2.png" alt="https://user-gold-cdn.xitu.io/2019/3/8/1695931b64281f5d?imageslim">
     </a></p>
<p>As you can see from the above figure, there are three levels of
<code>root-&gt; MyWidget-&gt; ErrorWidget</code>. This looks like a widget tree. The root here
corresponds to what was said in the previous
article <code>RenderObjectToWidgetAdapter</code>. But this is actually an element tree like
this: <code>RenderObjectToWidgetElement-&gt; StatelessElement-&gt; LeafRenderObjectElement</code>. Remember
what we said in the last article <code>RenderObjectToWidgetElement</code> is the root node of
the element tree. Look at the red box above the figure, this root node is the
root node holding the render tree <code>RenderView</code>. It is our own child nodes to
write <code>MyWidget</code> corresponding <code>StatelessElement</code>. And this element is not
held <code>RenderObject</code>. Only the bottom <code>ErrorWidget</code> corresponding
one <code>LeafRenderObjectElement</code> holds the second one <code>RenderObject</code>. So the render tree
is only two layers: <code>RenderView</code> -&gt; <code>RenderErrorBox</code>. The above is represented by
the diagram:</p>
<p>     <a href="media/436fbbba2a2c0890e862bff21e8ad6bd.png" rel="grouped" title="https://user-gold-cdn.xitu.io/2019/3/8/169595cf4c4ff46c?imageslim" target="_self" class="fancybox">
       <img src="media/436fbbba2a2c0890e862bff21e8ad6bd.png" alt="https://user-gold-cdn.xitu.io/2019/3/8/169595cf4c4ff46c?imageslim">
     </a></p>
<p>The green connecting line in the figure represents the hierarchical relationship
of the element tree. The yellow connecting line represents the hierarchical
relationship of the render tree.</p>
<p>As can be seen from the above example, it <code>Widget</code> is used to describe the
corresponding <code>Element</code> description or configuration. The main function <code>Element</code> of
the element tree <code>Element</code> is to maintain the tree. The addition, deletion, update,
and tree traversal of the node are completed here. <code>Element</code> From
all <code>Widget</code> generated. Each <code>Widget</code> will correspond to one <code>Element</code>. But not
every <code>Widget</code>/ <code>Element</code> will correspond to one <code>RenderObject</code>. Only when
this <code>Widget</code> inherits <code>RenderObjectWidget</code> will there be a
corresponding <code>RenderObject</code>.</p>
<p>In general, it is the following:</p>
<ul>
<li><p><code>Widget</code> Is <code>Element</code> the configuration or description of the pair . The main job
of the Flutter app developers is to <code>Widget</code> deal with them. We don&apos;t need to
care about the maintenance and update of the tree, we just need to focus
on <code>Widget</code> the maintenance of the state, which greatly reduces the burden on
the developer.</p>
</li>
<li><p><code>Element</code> Responsible for maintaining the element tree. <code>Element</code> I don&apos;t care
about the specific color, font size, display content, etc. The configuration
or description of these UIs, and I don&apos;t care about the layout, drawing
these things, it just manages its own tree. <code>Element</code> The main work is in the
build phase of the render pipeline.</p>
</li>
<li><p><code>RenderObject</code> Responsible for the specific layout and drawing these
things. That is, the layout and painting phases of the rendering pipeline.</p>
</li>
</ul>
<p>Next we will combine the source code to analyze <code>Widget</code>, <code>Element</code> and <code>RenderObject</code>.</p>
<h2 id="widget"><a name="widget" class="anchor-navigation-ex-anchor" href="#widget"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Widget</h2>
<p>The base class <code>Widget</code> is very simple</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">@immutable
abstract class Widget extends DiagnosticableTree {

  const Widget({ this.key });
  ...
  @protected
  Element createElement();
  ...
}<br></div></div>


<p>The method <code>createElement()</code> is responsible for instantiating the corresponding
one <code>Element</code>. It is implemented by its subclasses. Next, let&apos;s look at a few more
important subclasses:</p>
<h3 id="statelesswidget"><a name="statelesswidget" class="anchor-navigation-ex-anchor" href="#statelesswidget"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. StatelessWidget</h3>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class StatelessWidget extends Widget {
  /// Initializes [key] for subclasses.
  const StatelessWidget({ Key key }) : super(key: key);

  @override
  StatelessElement createElement() =&gt; StatelessElement(this);

  @protected
  Widget build(BuildContext context);
}<br></div></div>


<p><code>StatelessWidget</code> Familiar with the Flutter developers. Its <code>createElement</code> method
returns an <code>StatelessElement</code> instance.</p>
<p><code>StatelessWidget</code> There is no <code>RenderObject</code> method
of generating . So <code>StatelessWidget</code> just a middle layer, it needs to
implement <code>build</code> methods to return children <code>Widget</code>.</p>
<h3 id="statefulwidget"><a name="statefulwidget" class="anchor-navigation-ex-anchor" href="#statefulwidget"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. StatefulWidget</h3>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class StatefulWidget extends Widget {
  @override
  StatefulElement createElement() =&gt; StatefulElement(this);

  @protected
  State createState();
}<br></div></div>

<p><code>StatefulWidget</code> Very familiar with the Flutter developers. <code>createElement</code> The method
returns an <code>StatefulElement</code> instance. The method of <code>createState()</code> constructing this
corresponds <code>StatefulWidget</code> to <code>State</code>.</p>
<p><code>StatefulWidget</code> There is no <code>RenderObject</code> method
of generating . So <code>StatefulWidget</code> it&apos;s just a middle layer, it needs a
corresponding <code>State</code> implementation <code>build</code> to return the child <code>Widget</code>.</p>
<h4 id="state"><a name="state" class="anchor-navigation-ex-anchor" href="#state"><i class="fa fa-link" aria-hidden="true"></i></a><strong>State</strong></h4>
<p>When <code>StatefulWidget</code> you say it, you can&apos;t stop talking <code>State</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class State&lt;T extends StatefulWidget&gt; extends Diagnosticable {
  T get widget =&gt; _widget;
  T _widget;

  BuildContext get context =&gt; _element;
  StatefulElement _element;

  bool get mounted =&gt; _element != null;

  void initState() { }

  void didUpdateWidget(covariant T oldWidget) { }

  void setState(VoidCallback fn) {
    final dynamic result = fn() as dynamic;
    _element.markNeedsBuild();
  }

  void deactivate() { }

  void dispose() { }

  Widget build(BuildContext context);

  void didChangeDependencies() { }
}<br></div></div>


<p>Visible from source, <code>State</code> hold the corresponding <code>Widget</code> and <code>Element</code>. Pay
attention to this sentence <code>BuildContext get context =&gt; _element;</code>. The
input <code>build</code> we entered at the time of the call <code>BuildContext</code> actually
returned <code>Element</code>.</p>
<p><code>mounted</code> Used to determine if this <code>State</code> is associated with one of the element
trees <code>Element</code>. If you are <code>State</code> not currently in <code>mounted == true</code> the state,
you <code>setState()</code> will crash when you call it.</p>
<p>The function is <code>initState()</code> used to initialize <code>State</code>.</p>
<p>The function is called after <code>didUpdateWidget(covariant T oldWidget)</code> this
has <code>State</code> been changed <code>Widget</code>. Yes, the <code>State</code> corresponding <code>Widget</code> instances can be
exchanged for as long as they are of the same type.</p>
<p>The function <code>setState()</code> is very familiar to us. This function simply executes the
incoming callback and then calls it <code>_element.markNeedsBuild()</code>. You see, if this
time <code>_element</code> is empty, will there be a problem? So I suggest
you <code>setState()</code> use <code>mounted</code> it before you call it. Another point to note is that
this function is also a point that triggers the rendering pipeline. I would
follow from this point in another article, for everyone to talk about how the
rendering pipeline <code>Widget</code>, <code>Element</code> and <code>RenderObject</code> lower operational framework.</p>
<p>Function <code>deactivate()</code> in <code>State</code> the corresponding <code>Element</code> after being removed from
the tree to call, this may be removed temporarily removed.</p>
<p>Function <code>dispose()</code> in <code>State</code> the corresponding <code>Element</code> after being removed from the
call tree, the removal is permanently removed.</p>
<p>The function <code>build(BuildContext context)</code>, everyone is very familiar with, not
much to say.</p>
<p>The function <code>didChangeDependencies()</code>, when <code>State</code> the dependency changes, is
called, and what kind of dependency depends on the text.</p>
<p><code>StatefullWidget</code> and <code>State</code> it may be the most dealing with the developers of the
Flutter app. Some details also need to be combined to <code>Element</code> make an in-depth
understanding.</p>
<h3 id="inheritedwidget"><a name="inheritedwidget" class="anchor-navigation-ex-anchor" href="#inheritedwidget"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. InheritedWidget</h3>
<p><code>InheritedWidget</code> Neither is it <code>StatefullWidget</code> nor <code>StatelessWidget</code>. It is used to
pass data down. In <code>InheritedWidget</code> sub-node under the can by
calling <code>BuildContext.inheritFromWidgetOfExactType()</code> to get
this <code>InheritedWidget</code>. Its <code>createElement()</code> function returns one <code>InheritedElement</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class InheritedWidget extends ProxyWidget {
  const InheritedWidget({ Key key, Widget child })
    : super(key: key, child: child);

  @override
  InheritedElement createElement() =&gt; InheritedElement(this);

  @protected
  bool updateShouldNotify(covariant InheritedWidget oldWidget);
}<br></div></div>


<h3 id="renderobjectwidget"><a name="renderobjectwidget" class="anchor-navigation-ex-anchor" href="#renderobjectwidget"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. RenderObjectWidget</h3>
<p><code>RenderObjectWidget</code> Used for
configuration <code>RenderObject</code>. Its <code>createElement()</code> function
returns <code>RenderObjectElement</code>. It is implemented by its subclasses. Relative to
the other mentioned above <code>Widget</code>. There is one
more <code>createRenderObject()</code> method here . Used to instantiate <code>RenderObject</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class RenderObjectWidget extends Widget {

  const RenderObjectWidget({ Key key }) : super(key: key);

  @override
  RenderObjectElement createElement();

  @protected
  RenderObject createRenderObject(BuildContext context);

  @protected
  void updateRenderObject(BuildContext context, covariant RenderObject renderObject) { }

  @protected
  void didUnmountRenderObject(covariant RenderObject renderObject) { }
}<br></div></div>


<p><code>RenderObjectWidget</code> Just a configuration, when the configuration changes need to
be applied to the existing <code>RenderObject</code> one, the Flutter framework will
call <code>updateRenderObject()</code> to set the new configuration to the corresponding
one <code>RenderObject</code>.</p>
<p><code>RenderObjectWidget</code> There are three more important subclasses:</p>
<ul>
<li><p><code>LeafRenderObjectWidget</code> The <code>Widget</code> node of this configuration is at the bottom
of the tree, it has no children. Correspondence <code>LeafRenderObjectElement</code>.</p>
</li>
<li><p><code>SingleChildRenderObjectWidget</code>, only one
child. Correspondence <code>SingleChildRenderObjectElement</code>.</p>
</li>
<li><p><code>MultiChildRenderObjectWidget</code> There are multiple
children. Correspondence <code>MultiChildRenderObjectElement</code>.</p>
</li>
</ul>
<h2 id="element"><a name="element" class="anchor-navigation-ex-anchor" href="#element"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Element</h2>
<p><code>Element</code> Forms the element tree. The main thing that this class is doing is to
maintain this tree. From<code>Widget</code> the analysis of the above, we can see that it
seems that each special one <code>Widget</code> will have a corresponding
one <code>Element</code>. Especially for <code>RenderObjectWidget</code>. If I have
one <code>XXXRenderObjectWidget</code>, it <code>createElement()</code> usually returns
one <code>XXXRenderObjectElement</code>. For the sake of simplicity. Our analysis is limited
to a few basic ones <code>Element</code>. First look at the base class <code>Element</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class Element extends DiagnosticableTree implements BuildContext {
    Element _parent;
    Widget _widget;
    BuildOwner _owner;
    dynamic _slot;

    void visitChildren(ElementVisitor visitor) { }

    Element updateChild(Element child, Widget newWidget, dynamic newSlot) {

    }

    void mount(Element parent, dynamic newSlot) {

    }

    void unmount() {

    }

    void update(covariant Widget newWidget) {

    }

    @protected
    Element inflateWidget(Widget newWidget, dynamic newSlot) {
    ...
      final Element newChild = newWidget.createElement();
      newChild.mount(this, newSlot);
      return newChild;
    }

    void markNeedsBuild() {
      if (dirty)
        return;
      _dirty = true;
      owner.scheduleBuildFor(this);
    }

    void rebuild() {
      if (!_active || !_dirty)
        return;
      performRebuild();
    }

    @protected
    void performRebuild();
}<br></div></div>

<p><code>Element</code> Hold the
current <code>Widget</code> one <code>BuildOwner</code>. This <code>BuildOwner</code> was <code>WidgetsBinding</code> instantiated in
the previous one. <code>Element</code> is a tree structure that holds the parent
node <code>_parent</code>. Set <code>_slot</code> by the parent <code>Element</code>, the purpose is to tell the
current <code>Element</code> location of the parent node. Because the <code>Element</code> base class does
not know how the child class will manage the child node. So the
function <code>visitChildren()</code> is implemented by a subclass to traverse the child node.</p>
<p>The function is <code>updateChild()</code> more important to update a child node. There are
four cases for updates:</p>
<ul>
<li><p>The new <code>Widget</code> is empty, and the old <code>Widget</code> is empty. Then I will not do it.</p>
</li>
<li><p>New <code>Widget</code> is empty, old is <code>Widget</code> not empty. This <code>Element</code> was removed.</p>
</li>
<li><p>New is <code>Widget</code> not empty, old <code>Widget</code> is empty. Then
call <code>inflateWidget()</code> this <code>Wiget</code> to instantiate one for the
configuration <code>Element</code>.</p>
</li>
<li><p>New is <code>Widget</code> not empty, old is <code>Widget</code> not empty. Call the <code>update()</code> function
updater <code>Element</code>. <code>update()</code> Functions are implemented by subclasses.</p>
</li>
</ul>
<p>After the new <code>Element</code> instantiation is called, it will be called <code>mount()</code> to add
itself to the element tree. Called when you want to remove <code>unmount()</code>.</p>
<p>The function is <code>markNeedsBuild()</code> used to mark Elementthe &quot;dirty&quot; state. Indicates
that this <code>Element</code> needs to be rebuilt when rendering the next frame .</p>
<p>The function<code>rebuild()</code> is called during the build phase of the render
pipeline. The concrete reconstruction is implemented in the
function <code>performRebuild()</code> and by the <code>Element</code> subclass.</p>
<p><code>Widget</code> There are some more important subclasses, and <code>Element</code> there are some more
important subclasses.</p>
<h3 id="componentelement"><a name="componentelement" class="anchor-navigation-ex-anchor" href="#componentelement"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. ComponentElement</h3>
<p><code>ComponentElement</code> indicates that this <code>Element</code> is currently used to combine
other <code>Element</code> ones.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class ComponentElement extends Element {
  ComponentElement(Widget widget) : super(widget);

  Element _child;

  @override
  void performRebuild() {
    Widget built;
    built = build();
    _child = updateChild(_child, built, slot);
  }

  Widget build();
}<br></div></div>


<p><code>ComponentElement</code> inherited from <code>Element</code>. Is an abstract class. <code>_child</code> is its
child. <code>performRebuild()</code> is called in the function <code>build()</code> to instantiate
one <code>Widget</code>. <code>build()</code> Functions are implemented by their subclasses.</p>
<h3 id="statelesselement"><a name="statelesselement" class="anchor-navigation-ex-anchor" href="#statelesselement"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.2. StatelessElement</h3>
<p><code>StatelessElement</code> Corresponding <code>Widget</code> is what we are familiar
with <code>StatelessWidget</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">class StatelessElement extends ComponentElement {

  @override
  Widget build() =&gt; widget.build(this);

  @override
  void update(StatelessWidget newWidget) {
    super.update(newWidget);
    _dirty = true;
    rebuild();
  }
}<br></div></div>



<p>Its <code>build()</code> function is called directly <code>StatelessWidget.build()</code>. Now you know
where you are written <code>StatelessWidget</code> and <code>build()</code> where it is called. And you see,
the <code>build()</code> function&apos;s input is this. We all know that the input parameters of
this function should be of <code>BuildContext</code> type. This entry is actually
this <code>StatelessElement</code>.</p>
<h3 id="statefulelement"><a name="statefulelement" class="anchor-navigation-ex-anchor" href="#statefulelement"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.3. StatefulElement</h3>
<p><code>StatefulElement</code> Corresponding <code>Widget</code> is what we are familiar with <code>StatefulWidget</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">class StatefulElement extends ComponentElement {
  /// Creates an element that uses the given widget as its configuration.
  StatefulElement(StatefulWidget widget)
      : _state = widget.createState(),
        super(widget) {
    _state._element = this;
    _state._widget = widget;
  }

  @override
  Widget build() =&gt; state.build(this);

   @override
  void _firstBuild() {
    final dynamic debugCheckForReturnedFuture = _state.initState()
    _state.didChangeDependencies();
    super._firstBuild();
  }

  @override
  void deactivate() {
    _state.deactivate();
    super.deactivate();
  }

  @override
  void unmount() {
    super.unmount();
    _state.dispose();
    _state._element = null;
    _state = null;
  }

  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    _state.didChangeDependencies();
  }
}<br></div></div>

<p>In the <code>StatefulElement</code> construction time can call the
corresponding <code>StatefulWidget</code> the <code>createState()</code> function. That <code>State</code> is to say,
it is instantiated at <code>StatefulElement</code> the time of instantiation. And
the <code>State</code> instance will be <code>StatefulElement</code> held by this instance. From here you
can also see why <code>StatefulWidget</code> the state is managed separately, <code>State</code> and a new
one may be <code>StatefulWidget</code> created each time it is refreshed , but
the <code>State</code> instance is unchanged.</p>
<p><code>build()</code> The function call is familiar to us, <code>State.build(this)</code> and now you know
where <code>State</code> the <code>build()</code> function is called. And you see, the <code>build()</code> function&apos;s
input is this. We all know that the input parameters of this function should be
of <code>BuildContext</code> type. This entry is actually this <code>StatefulElement</code>.</p>
<p>We all know that <code>State</code> has a state, and the corresponding callback function will
be called when the state changes. These callback functions are
actually <code>StatefulElement</code> called inside.</p>
<p>In the function <code>_firstBuild()</code> where
calls <code>State.initState()</code> and <code>State.didChangeDependencies()</code>.</p>
<p><code>deactivate()</code> Called in the function <code>State.deactivate()</code>.</p>
<p><code>unmount()</code> Called in the function <code>State.dispose()</code>.</p>
<p><code>didChangeDependencies()</code> Called in the function <code>State.didChangeDependencies()</code>.</p>
<h3 id="inheritedelement"><a name="inheritedelement" class="anchor-navigation-ex-anchor" href="#inheritedelement"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.4. InheritedElement</h3>
<p><code>InheritedElement</code> The corresponding <code>Widget</code> is <code>InheritedWidget</code>. The internal
implementation is mainly to maintain the child <code>Element</code> that has dependencies on
it <code>Map</code>, and to call
the <code>Element</code> corresponding <code>didChangeDependencies()</code> callback when needed. The code
is not posted here. If you are interested, you can look at the source code
yourself.</p>
<h3 id="renderobjectelement"><a name="renderobjectelement" class="anchor-navigation-ex-anchor" href="#renderobjectelement"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.5. RenderObjectElement</h3>
<p><code>RenderObjectElement</code> The corresponding <code>Widget</code> is <code>RenderObjectWidget</code>.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class RenderObjectElement extends Element {
  RenderObject _renderObject;

  @override
  void mount(Element parent, dynamic newSlot) {
    super.mount(parent, newSlot);
    _renderObject = widget.createRenderObject(this);
    attachRenderObject(newSlot);
    _dirty = false;
  }

  @override
  void unmount() {
    super.unmount();
    widget.didUnmountRenderObject(renderObject);
  }

  @override
  void update(covariant RenderObjectWidget newWidget) {
    super.update(newWidget);
    widget.updateRenderObject(this, renderObject);
    _dirty = false;
  }

  @override
  void performRebuild() {
    widget.updateRenderObject(this, renderObject);
    _dirty = false;
  }

  @protected
  void insertChildRenderObject(covariant RenderObject child, covariant dynamic slot);

  @protected
  void moveChildRenderObject(covariant RenderObject child, covariant dynamic slot);

  @protected
  void removeChildRenderObject(covariant RenderObject child);

}<br></div></div>

<p>The function <code>mount()</code> is called <code>RenderObjectWidget.createRenderObject()</code> to
instantiate when the function is called <code>RenderObject</code>.</p>
<p>Function <code>update()</code> and <code>performRebuild()</code>is invoked
calls <code>RenderObjectWidget.updateRenderObject()</code>.</p>
<p><code>unmount()</code> Called when the function is
called <code>RenderObjectWidget.didUnmountRenderObject()</code>.</p>
<h2 id="renderobject"><a name="renderobject" class="anchor-navigation-ex-anchor" href="#renderobject"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. RenderObject</h2>
<p><code>RenderObject</code> Responsible for rendering the layout and painting phases of the
pipeline. The render tree is also maintained. The maintenance method for the
render tree is from the base class <code>AbstractNode</code>. Here we focus on some of the
methods associated with rendering pipelines.</p>
<div class="ace"><div class="aceCode" data-config="{&quot;edit&quot;:false,&quot;lang&quot;:&quot;dart&quot;,&quot;check&quot;:false,&quot;theme&quot;:&quot;monokai&quot;}">abstract class RenderObject extends AbstractNode with DiagnosticableTreeMixin implements HitTestTarget {

  void markNeedsLayout() {
      ...
  }

  void markNeedsPaint() {
      ...
  }

  void layout(Constraints constraints, { bool parentUsesSize = false }) {
    ...
    if (sizedByParent) {
        performResize();
    }
    ...
    performLayout();
    ...
  }

  void performResize();

  void performLayout();

  void paint(PaintingContext context, Offset offset) { }
}<br></div></div>

<p><code>markNeedsLayout()</code> Marking this <code>RenderObject</code> requires
re-layout. <code>markNeedsPaint</code> Marking this <code>RenderObject</code> requires redrawing. These two
functions are only marked. After the markup, the Flutter framework dispatches a
frame and does the layout and drawing after the next Vsync signal arrives.</p>
<p>The real layout is done in the function <code>layout()</code>. This function will make a
judgment if it <code>sizedByParent</code> is <code>true</code>. Will be called <code>performResize()</code>. Indicates
that <code>RenderObject</code> the size of this is determined only by its parent node. Then it
will be called to <code>performLayout()</code> do the layout. <code>performResize()</code> And subclasses
that <code>performLayout()</code> are needed <code>RenderObject</code> to implement.</p>
<h2 id="to-sum-up"><a name="to-sum-up" class="anchor-navigation-ex-anchor" href="#to-sum-up"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. to sum up</h2>
<p><code>Widget</code>, <code>Element</code> and the <code>RenderObject</code> system is the core of the Flutter
framework. It <code>Element</code> needs to be understood. The build phase in Flutter&apos;s
rendering pipeline is primarily to maintain <code>Element</code> nodes in the updated element
tree . Only by understanding the <code>Element</code> element tree, is the real master of the
Flutter framework. This article is just some static instructions. In the next
article I will try to analyze how the Flutter framework works from the
perspective of the dynamic operation of the rendering pipeline.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Flutter Framework Analysis 2 - Initialization.html" class="navigation navigation-prev " aria-label="Previous page: Flutter Framework Analysis 2 - Initialization">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Flutter Framework Analysis 4 - Flutter Framework Operation.html" class="navigation navigation-next " aria-label="Next page: Flutter Framework Analysis 4 - Flutter Framework Operation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Flutter Framework Analysis 3 - Widget, Element and RenderObject","level":"1.11.3","depth":2,"next":{"title":"Flutter Framework Analysis 4 - Flutter Framework Operation","level":"1.11.4","depth":2,"path":"Flutter Framework Analysis 4 - Flutter Framework Operation.md","ref":"Flutter Framework Analysis 4 - Flutter Framework Operation.md","articles":[]},"previous":{"title":"Flutter Framework Analysis 2 - Initialization","level":"1.11.2","depth":2,"path":"Flutter Framework Analysis 2 - Initialization.md","ref":"Flutter Framework Analysis 2 - Initialization.md","articles":[]},"dir":"ltr"},"config":{"plugins":["include-html","fancybox","anchor-navigation-ex-toc","ace","-lunr","-search","search-plus","hide-published-with","splitter","expandable-chapters-interactive","wide-page"],"root":"./docs","styles":{"website":"styles/website.css"},"pluginsConfig":{"fancybox":{"helpers":{"buttons":{}}},"ace":{},"splitter":{},"wide-page":{},"anchor-navigation-ex-toc":{"showLevel":true,"associatedWithSummary":true,"mode":"float","printLog":false,"multipleH1":true,"float":{"showLevelIcon":false,"level1Icon":"","level2Icon":"","level3Icon":""},"pageTop":{"showLevelIcon":false,"level1Icon":"","level2Icon":"","level3Icon":""}},"hide-published-with":{},"include-html":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"expandable-chapters-interactive":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{},"search-plus":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"Flutter Framework Analysis 3 - Widget, Element and RenderObject.md","mtime":"2019-07-23T10:24:19.791Z","type":"markdown"},"gitbook":{"version":"3.3.6","time":"2023-12-10T09:35:29.798Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.mousewheel.pack.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.fancybox.pack.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fancybox/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ace/ace/ace.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ace/ace.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-hide-published-with/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters-interactive/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/@gitbook-ng/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

